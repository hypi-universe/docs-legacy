{"componentChunkName":"component---src-templates-docs-js","path":"/references/api-gateway","result":{"data":{"site":{"siteMetadata":{"title":"Hypi Documentation","docsLocation":"https://github.com/hypi-universe/docs/tree/master/content"}},"mdx":{"fields":{"id":"1188c5d6-7ccd-5755-9da8-f33ef9ee49ec","title":"API Gateway","slug":"/references/04-api-gateway"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"API Gateway\",\n  \"metaTitle\": \"Hypi Platform Documentation for Hypi API Gateway\",\n  \"metaDescription\": \"Hypi platform documentation of the available HTTP API Gateway service\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Overview\"), mdx(\"p\", null, \"Hypi's API gateway can be throught of as a middleware that simplifies the integration of your app with other services.\"), mdx(\"p\", null, \"Importantly, by using the Hypi gateway, you can integrate external services with your Hypi app as if they were a part of the platform.\"), mdx(\"p\", null, \"Hypi's features such as authorisation, workflows etc can all be mixed with gateway functions.\"), mdx(\"h1\", null, \"Using the API gateway\"), mdx(\"p\", null, \"To use the API gateway, you must add a dependency to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"gateway\"), \" app.\\nAs a reminder, a dependency is referenced by the app name, realm and release.\\nThe API gateway app has the following dependency coordinates:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"realm: hypi\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"name: gateway\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"release: latest\")), mdx(\"p\", null, \"You can change the release to another one available at the time.\\nTo find the releases available, use the Hypi user interface or API to find the Gateway app and this will provide a full, current list of releases available.\"), mdx(\"h1\", null, \"@http directive\"), mdx(\"p\", null, \"Hypi's API gateway is centered around a directive, namely \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"@http\"), \".\\nTo integrate an API you add the directive to a query or mutation function in your app's schema.\"), mdx(\"p\", null, \"Once you have added the directive to a function, it can be treated like any other function in Hypi. The only thing special about it is that instead of getting its data from the Hypi platform or serverless function, it will get its data from the HTTP service you've configured it to.\"), mdx(\"h2\", null, \"Definition and parameters\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"directive @http(\\n  method: HttpMethod! = GET,\\n  url: String!,\\n  headers: String,\\n  requestTemplate: String,\\n  saveAs: String\\n) on FIELD_DEFINITION\\n\")), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Parameter\"), mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Description\"), mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Example\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"method\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"One of the available HTTP methods\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"GET, PUT, POST, DELETE, PATCH, OPTIONS, HEAD, TRACE\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"url\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"The URL template to use to make the request\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), mdx(\"a\", _extends({\n    parentName: \"td\"\n  }, {\n    \"href\": \"https://api.my-domain.com/users/$%7Bsettings.userId%7D?includeAge=$%7Bvars.includeAge%7D\"\n  }), \"https://api.my-domain.com/users/${settings.userId}?includeAge=${vars.includeAge}\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"headers\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"The string formatted JSON object which sets the headers sent in the HTTP request. A JSON object where ALL entries MUST be strings or convertible to strings (basically numbers) #e.g. {\\\"a\\\": \\\"v1\\\", \\\"b\\\": 2}\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"{\\\"Authorization\\\":\\\"Bearer ${settings.apiToken}\\\"}\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"requestTemplate\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"The name of the request template which defines how the request body and response should be handled\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"saveAs\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"If present, the HTTP response will be stored in Hypi as the given type. The type must exist in the current instance\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }))))), mdx(\"p\", null, \"When applied causes the value of the field it is applied to to be resolved using an HTTP query configured with the given parameters\"), mdx(\"h2\", null, \"Variables\"), mdx(\"p\", null, \"Each argument is a valid Velocity template meaning you can use dynamic parameters.\\nThe following may be referenced \\\"vars\\\", \\\"settings\\\".\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"vars\"), \" refers to any arguments on the field the directive is applied to so ${vars.firstName} refers to the firstName arg of the field\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"settings\"), \" refers to any instance settings provided in the app\")), mdx(\"h2\", null, \"Utilities:\"), mdx(\"p\", null, \"JSON and Map utilities are available for use in all templates.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"JsonNode JSON.parseJSON(String)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Map<String, Object> JSON.parse(String)\")), mdx(\"p\", null, \"Map is the standard Java Map interface containing static util methods e.g. Map.of(...)\\nJsonNode is a class used to represent JSON values by the Jackson JSON library.\"), mdx(\"h2\", null, \"Example\"), mdx(\"p\", null, \"In the Hypi schema editor (or via the API), you annotate any query or mutation you define with this directive.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-graphql\"\n  }), \"type Query {\\n getUser(includeAge: Boolean): User @http(\\n    url: \\\"https://api.my-domain.com/users/${settings.userId}?includeAge=${vars.includeAge}\\\",\\n    headers: \\\"\\\"\\\"{\\\"Authorization\\\":\\\"Bearer ${settings.apiToken}\\\"}\\\"\\\"\\\"\\n  )\\n}\\n\")), mdx(\"p\", null, \"You can then call this function via HTTP or GraphQL in your app.\\nNote here that the response from the API \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"MUST\"), \" match the structure of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"User\"), \" object you specified as the return type.\"), mdx(\"p\", null, \"If you're making a request to an API which doesn't directly match your type i.e. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"User\"), \" in this case, you can use the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"requestTemplate\"), \"\\nparameter to transform the API response by extracting fields from it and constructing an object which matches your declared return type.\"));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#overview","title":"Overview"},{"url":"#using-the-api-gateway","title":"Using the API gateway"},{"url":"#http-directive","title":"@http directive","items":[{"url":"#definition-and-parameters","title":"Definition and parameters"},{"url":"#variables","title":"Variables"},{"url":"#utilities","title":"Utilities:"},{"url":"#example","title":"Example"}]}]},"parent":{"__typename":"File","relativePath":"references/04-api-gateway.md"},"frontmatter":{"metaTitle":"Hypi Platform Documentation for Hypi API Gateway","metaDescription":"Hypi platform documentation of the available HTTP API Gateway service"}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/getting-started","title":"Getting Started"}}},{"node":{"fields":{"slug":"/404","title":"Page Not Found"}}},{"node":{"fields":{"slug":"/introduction","title":"Introduction"}}},{"node":{"fields":{"slug":"/","title":"Platform Documentation"}}},{"node":{"fields":{"slug":"/references","title":"API & References"}}},{"node":{"fields":{"slug":"/products","title":"Products"}}},{"node":{"fields":{"slug":"/recipes","title":"Recipes"}}},{"node":{"fields":{"slug":"/tutorials","title":"Tutorials"}}},{"node":{"fields":{"slug":"/tutorials/00-graphql","title":"GraphQL"}}},{"node":{"fields":{"slug":"/tutorials/01-instance","title":"Instances"}}},{"node":{"fields":{"slug":"/references/00-app","title":"Apps"}}},{"node":{"fields":{"slug":"/tutorials/04-graph","title":"Graph Queries"}}},{"node":{"fields":{"slug":"/references/01-api","title":"API Setup"}}},{"node":{"fields":{"slug":"/tutorials/04-dateGranularity","title":"Timeseries Aggregations with Date Granularity"}}},{"node":{"fields":{"slug":"/references/03-authorisation","title":"Authorisation"}}},{"node":{"fields":{"slug":"/reference","title":"Reference"}}},{"node":{"fields":{"slug":"/references/04-api-gateway","title":"API Gateway"}}},{"node":{"fields":{"slug":"/references/07-workflow","title":"Workflows"}}},{"node":{"fields":{"slug":"/references/11-serverless-functions","title":"Serverless functions"}}},{"node":{"fields":{"slug":"/references/08-webhooks","title":"Webhooks"}}},{"node":{"fields":{"slug":"/references/10-triggers","title":"Triggers"}}},{"node":{"fields":{"slug":"/references/09-math-api","title":"Math API"}}},{"node":{"fields":{"slug":"/references/15-oauth2-login","title":"OAuth2 Login"}}},{"node":{"fields":{"slug":"/references/13-analytics","title":"Analytics"}}},{"node":{"fields":{"slug":"/references/16-iot","title":"IoT"}}},{"node":{"fields":{"slug":"/references/12-user-defined-functions","title":"User Defined Functions"}}},{"node":{"fields":{"slug":"/tutorials/00-graphql/01-intro","title":"Introduction"}}},{"node":{"fields":{"slug":"/getting-started/01-scratch","title":"Starting from scratch"}}},{"node":{"fields":{"slug":"/tutorials/00-graphql/03-query","title":"Queries"}}},{"node":{"fields":{"slug":"/tutorials/00-graphql/04-mutation","title":"Mutations"}}},{"node":{"fields":{"slug":"/tutorials/00-graphql/05-subscription","title":"Subscriptions"}}},{"node":{"fields":{"slug":"/tutorials/00-graphql/06-hypi-object","title":"Magic Hypi Object"}}},{"node":{"fields":{"slug":"/tutorials/00-graphql/07-directives","title":"Directives"}}},{"node":{"fields":{"slug":"/references/14-file-upload","title":"File upload API"}}},{"node":{"fields":{"slug":"/tutorials/00-graphql/08-interfaces","title":"Interfaces"}}},{"node":{"fields":{"slug":"/faq","title":"FAQs"}}},{"node":{"fields":{"slug":"/tutorials/03-crud","title":"Hypi GraphQL CRUD Tutorial"}}},{"node":{"fields":{"slug":"/references/02-crud","title":"CRUD"}}},{"node":{"fields":{"slug":"/references/05-aggregations-api","title":"Aggregations API"}}},{"node":{"fields":{"slug":"/references/06-rest-api","title":"RESTful APIs"}}},{"node":{"fields":{"slug":"/getting-started/02-angular","title":"Hypi + Angular"}}},{"node":{"fields":{"slug":"/tutorials/00-graphql/02-schema-and-types","title":"Schema & Types"}}},{"node":{"fields":{"slug":"/references/02-arcql","title":"ArcQL Filtering"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"1188c5d6-7ccd-5755-9da8-f33ef9ee49ec"}}}